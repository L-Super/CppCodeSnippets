## Windows

### PowerShell

设置代理：

```powershell
$env:http_proxy="http://proxy.example.com:8080"
$env:https_proxy="http://proxy.example.com:8080"
$env:no_proxy="localhost,127.0.0.1,example.com"
```

> 如果希望配置持续生效，可以将环境变量加入到系统环境变量中。

取消代理：

```powershell
$env:http_proxy=""
$env:https_proxy=""
$env:no_proxy=""
```

验证设置代理是否成功

```powershell
curl.exe -I google.com
```

或者替换为想要访问的域名，如果有响应，那么就设置成功。

### cmd

设置代理：

```batch
set http_proxy=http://proxy.example.com:8080
set https_proxy=http://proxy.example.com:8080
set no_proxy=localhost,127.0.0.1,example.com
```

取消代理：

```batch
set http_proxy=
set https_proxy=
set no_proxy=
```

----

最简单方法设置代理，通过clash直接选择对应的终端，打开之后即是设置好代理的终端。

![image-20230628161324178](../images/clash_proxy_shell)

## Linux

### Shell

设置代理：

```bash
export http_proxy=http://proxy.example.com:8080
export https_proxy=http://proxy.example.com:8080
export all_proxy=http://proxy.example.com:8080
export no_proxy=localhost,127.0.0.1,example.com
```

> 如果希望配置持续生效，可以写入到 `.bashrc`/`.zshrc` 等文件中。

取消代理：

```bash
unset http_proxy
unset https_proxy
unset all_proxy
unset no_proxy
```

## WSL

这里主要指WSL2

首先需要代理软件，如Clash，设置**允许局域网**（Allow LAN）开关为打开状态

![img](https://img2022.cnblogs.com/blog/2026333/202205/2026333-20220519095954875-534125057.png)

然后，代理的IP不是127.0.0.1，而是本机的IP，这里需要特别注意，本机IP在`/etc/resolv.conf`进行查看

```
leoya@DESKTOP-30Q198G:~$ cat /etc/resolv.conf
# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
# [network]
# generateResolvConf = false
nameserver 172.31.64.1
```

nameserver这行就是需要的本机IP。